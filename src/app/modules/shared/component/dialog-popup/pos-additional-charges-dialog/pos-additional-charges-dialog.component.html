<div *ngIf="load">
    <div class="flex items-center">
        <h2 mat-dialog-title class="font-bold">
            Add Additional Charges
        </h2>
        <mat-icon matTooltip="Add More Additional Charge" class="text-2xl font-bold cursor-pointer bg-primary text-white" svgIcon="heroicons_outline:plus-small"
            (click)="addAdditionalCharge()"></mat-icon>
    </div>
    <mat-dialog-content>
        <div class="inline-table w-full h-full">
            <table class="fuse-mat-dense rounded-2x" mat-table [dataSource]="additionChargesDataSource"
                color="primary">
                <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-700"> SR.No </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <!-- Cost Column -->
                <ng-container matColumnDef="additionalCharge">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-700"> Additional Charge </th>
                    <td mat-cell *matCellDef="let element" class="p-1"> 
                        <app-rv-auto-complete class="w-full" [parentForm]="element.form"
                [formElement]="element.nameElement" [showAddNew]="true" (valueSelected)="additionalChargeSelected($event, element)"></app-rv-auto-complete>
                     </td>
                </ng-container>
                <ng-container matColumnDef="value">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-700"> Value </th>
                    <td mat-cell *matCellDef="let element"> {{element.flatCharges}} </td>
                </ng-container>
                <ng-container matColumnDef="tax">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-700"> Tax </th>
                    <td mat-cell *matCellDef="let element"> {{element.tax}} </td>
                </ng-container>
                <ng-container matColumnDef="total">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-700"> Total </th>
                    <td mat-cell *matCellDef="let element"> {{element.total}} </td>
                </ng-container>
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-700"> Action </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <mat-icon class="cursor-pointer text-red-500 h-[20px] w-[20px]" svgIcon="heroicons_outline:trash" (click)="deleteAdditionalCharge(i)"></mat-icon>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="columns"></tr>
                <tr mat-row *matRowDef="let row; columns: columns;"></tr>
            </table>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button cdkFocusInitial class="bg-primary text-white" (click)="applyAdditionalCharges()">Apply</button>
    </mat-dialog-actions>
</div>